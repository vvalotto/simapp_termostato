# Plan de Implementaci√≥n - US-004 + US-005: Control de Temperatura

## Informaci√≥n de las Historias de Usuario

**ID:** US-004 + US-005 (Implementaci√≥n combinada)
**T√≠tulos:**
- US-004: Aumentar temperatura deseada
- US-005: Disminuir temperatura deseada
**√âpica:** Control de Temperatura
**Prioridad:** Alta (Must Have - MVP)
**Puntos de Historia:** 6 (3 + 3)
**Sprint:** Sprint 1 - Semana 2

**Historias:**

> **US-004:** Como usuario del termostato quiero poder aumentar la temperatura deseada presionando un bot√≥n para ajustar la climatizaci√≥n de mi hogar seg√∫n mis necesidades

> **US-005:** Como usuario del termostato quiero poder disminuir la temperatura deseada presionando un bot√≥n para reducir la climatizaci√≥n cuando hace demasiado calor o fr√≠o

## Criterios de Aceptaci√≥n Combinados

### US-004 (Aumentar)
- [ ] Bot√≥n "SUBIR" con icono de flecha arriba (‚ñ≤)
- [ ] Bot√≥n de color rojo (bg-red-600) para indicar calor
- [ ] Al presionar, la temperatura deseada aumenta en 0.5¬∞C
- [ ] El rango m√°ximo es 35¬∞C
- [ ] Al alcanzar el m√°ximo, el bot√≥n se deshabilita
- [ ] El bot√≥n solo est√° activo cuando el termostato est√° encendido
- [ ] Feedback visual al presionar (scale-95)
- [ ] El comando se env√≠a inmediatamente al RPi

### US-005 (Disminuir)
- [ ] Bot√≥n "BAJAR" con icono de flecha abajo (‚ñº)
- [ ] Bot√≥n de color azul (bg-blue-600) para indicar enfriamiento
- [ ] Al presionar, la temperatura deseada disminuye en 0.5¬∞C
- [ ] El rango m√≠nimo es 15¬∞C
- [ ] Al alcanzar el m√≠nimo, el bot√≥n se deshabilita
- [ ] El bot√≥n solo est√° activo cuando el termostato est√° encendido
- [ ] Feedback visual al presionar (scale-95)
- [ ] El comando se env√≠a inmediatamente al RPi

### Layout Compartido
- [ ] Botones SUBIR y BAJAR est√°n uno al lado del otro
- [ ] Mismo tama√±o y altura
- [ ] Espaciado consistente

## Arquitectura y Componentes

### Panel Control Temp (Nuevo)

Este panel implementar√° el patr√≥n MVC con dos botones en un solo panel:

```
ux_termostato/
‚îî‚îÄ‚îÄ app/
    ‚îî‚îÄ‚îÄ presentacion/
        ‚îî‚îÄ‚îÄ paneles/
            ‚îî‚îÄ‚îÄ control_temp/
                ‚îú‚îÄ‚îÄ __init__.py
                ‚îú‚îÄ‚îÄ modelo.py         # ControlTempModelo (dataclass)
                ‚îú‚îÄ‚îÄ vista.py          # ControlTempVista (QWidget)
                ‚îî‚îÄ‚îÄ controlador.py    # ControlTempControlador (QObject)
```

### Modelo de Datos

**ControlTempModelo** (dataclass inmutable):
```python
@dataclass(frozen=True)
class ControlTempModelo:
    """
    Modelo inmutable del estado del panel de control de temperatura.

    Attributes:
        temperatura_deseada: Temperatura objetivo en ¬∞C (15.0 a 35.0)
        habilitado: Si el panel est√° activo (depende del estado power)
        temp_min: Temperatura m√≠nima permitida (15.0¬∞C)
        temp_max: Temperatura m√°xima permitida (35.0¬∞C)
        incremento: Paso de incremento/decremento (0.5¬∞C)
    """
    temperatura_deseada: float = 22.0
    habilitado: bool = False
    temp_min: float = 15.0
    temp_max: float = 35.0
    incremento: float = 0.5

    def puede_aumentar(self) -> bool:
        """Retorna True si se puede aumentar la temperatura."""
        return self.habilitado and self.temperatura_deseada < self.temp_max

    def puede_disminuir(self) -> bool:
        """Retorna True si se puede disminuir la temperatura."""
        return self.habilitado and self.temperatura_deseada > self.temp_min
```

### Vista

**ControlTempVista** (QWidget puro, sin l√≥gica):
- Dos QPushButton: `btn_subir` y `btn_bajar`
- Layout horizontal con ambos botones
- Estilos diferenciados:
  - SUBIR: bg-red-600, texto blanco, icono ‚ñ≤
  - BAJAR: bg-blue-600, texto blanco, icono ‚ñº
- Display central mostrando temperatura deseada actual
- Estados condicionales:
  - Habilitado: botones con color brillante
  - Deshabilitado: botones en gris (bg-slate-700)
  - L√≠mite alcanzado: bot√≥n espec√≠fico deshabilitado
- Feedback visual con scale-95 al presionar
- Label opcional mostrando "Temperatura Deseada: XX.X¬∞C"

### Controlador

**ControlTempControlador** (QObject, gestiona l√≥gica y se√±ales):

**Se√±ales emitidas:**
```python
temperatura_cambiada = pyqtSignal(float)  # Nueva temperatura deseada
comando_enviado = pyqtSignal(dict)  # Comando JSON al RPi
```

**M√©todos p√∫blicos:**
```python
def aumentar_temperatura(self) -> None:
    """Incrementa temperatura deseada en 0.5¬∞C si es posible."""

def disminuir_temperatura(self) -> None:
    """Decrementa temperatura deseada en 0.5¬∞C si es posible."""

def set_habilitado(self, habilitado: bool) -> None:
    """Habilita/deshabilita el panel seg√∫n estado power."""

def set_temperatura_actual(self, temp: float) -> None:
    """Actualiza la temperatura deseada desde servidor RPi."""
```

**L√≥gica:**
1. Usuario hace click en SUBIR o BAJAR
2. Controlador valida si la acci√≥n es permitida (rango, habilitado)
3. Crea nuevo modelo con temperatura actualizada
4. Emite se√±al `temperatura_cambiada(nueva_temp)`
5. Crea comando JSON: `{"comando": "set_temp_deseada", "valor": XX.X, "timestamp": T}`
6. Emite se√±al `comando_enviado(comando)`
7. Actualiza vista con nuevo estado (temperatura y botones habilitados/deshabilitados)

## Plan de Tareas

### Fase 0: Validaci√≥n de Contexto (estimado: 5 minutos)
- [x] Verificar que US-004 y US-005 existen en HISTORIAS-USUARIO-UX-TERMOSTATO.md
- [x] Confirmar arquitectura de referencia (ADR-003, CLAUDE.md)
- [x] Verificar est√°ndares de calidad
- [x] Validar estructura de tests (conftest.py)

### Fase 1: BDD (OMITIDO por solicitud del usuario)

### Fase 2: Plan de Implementaci√≥n (estimado: 25 minutos)
- [x] Analizar criterios de aceptaci√≥n de ambas USs
- [x] Identificar componentes a implementar (MVC)
- [x] Generar checklist de tareas
- [x] Estimar tiempos por tarea
- [x] Crear archivo: `docs/plans/US-004-005-plan.md`

### Fase 3: Implementaci√≥n MVC (estimado: 150 minutos) ‚úÖ COMPLETADO

#### Task 3.1: Implementar ControlTempModelo ‚úÖ
- **Archivo:** `app/presentacion/paneles/control_temp/modelo.py`
- **Estimaci√≥n:** 20 minutos
- **Checklist:**
  - [x] Crear dataclass `ControlTempModelo`
  - [x] Atributos: temperatura_deseada, habilitado, temp_min, temp_max, incremento
  - [x] Marcar como `frozen=True`
  - [x] Implementar m√©todos: `puede_aumentar()`, `puede_disminuir()`
  - [x] Agregar docstrings detallados
  - [x] Incluir m√©todo `to_dict()` para serializaci√≥n

#### Task 3.2: Implementar ControlTempVista ‚úÖ
- **Archivo:** `app/presentacion/paneles/control_temp/vista.py`
- **Estimaci√≥n:** 50 minutos
- **Checklist:**
  - [x] Crear clase `ControlTempVista(QWidget)`
  - [x] Crear QPushButton para SUBIR (‚¨Ü / ‚ñ≤)
  - [x] Crear QPushButton para BAJAR (‚¨á / ‚ñº)
  - [x] Crear QLabel para mostrar temperatura deseada
  - [x] Configurar layout horizontal con spacing
  - [x] Aplicar estilos:
    - SUBIR: bg-red-600, hover red-700, disabled slate-700
    - BAJAR: bg-blue-600, hover blue-700, disabled slate-700
  - [x] Implementar `actualizar_estado(modelo: ControlTempModelo)`
  - [x] Configurar feedback visual (scale-95 con animation)
  - [x] Agregar tooltips descriptivos

#### Task 3.3: Implementar ControlTempControlador ‚úÖ
- **Archivo:** `app/presentacion/paneles/control_temp/controlador.py`
- **Estimaci√≥n:** 60 minutos
- **Checklist:**
  - [x] Crear clase `ControlTempControlador(QObject)`
  - [x] Definir se√±ales: `temperatura_cambiada`, `comando_enviado`
  - [x] Implementar `__init__(modelo, vista)`
  - [x] Conectar se√±al click de btn_subir a `aumentar_temperatura()`
  - [x] Conectar se√±al click de btn_bajar a `disminuir_temperatura()`
  - [x] Implementar l√≥gica de validaci√≥n en cada m√©todo
  - [x] Generar comando JSON con timestamp
  - [x] Emitir se√±ales apropiadas
  - [x] Implementar `set_habilitado()` para responder a power
  - [x] Implementar `set_temperatura_actual()` para sincronizaci√≥n

#### Task 3.4: Configurar __init__.py ‚úÖ
- **Archivo:** `app/presentacion/paneles/control_temp/__init__.py`
- **Estimaci√≥n:** 5 minutos
- **Checklist:**
  - [x] Exportar `ControlTempModelo`, `ControlTempVista`, `ControlTempControlador`
  - [x] Agregar `__all__`

#### Task 3.5: Crear Estructura de Directorios ‚úÖ
- **Estimaci√≥n:** 3 minutos
- **Checklist:**
  - [x] Crear `app/presentacion/paneles/control_temp/`

### Fase 4: Tests Unitarios (estimado: 210 minutos)

#### Task 4.1: Tests del Modelo
- **Archivo:** `tests/test_control_temp_modelo.py`
- **Estimaci√≥n:** 45 minutos
- **Checklist:**
  - [ ] Clase `TestCreacion`: valores default, valores custom
  - [ ] Clase `TestInmutabilidad`: verificar frozen
  - [ ] Clase `TestPuedeAumentar`: casos l√≠mite (max, habilitado/deshabilitado)
  - [ ] Clase `TestPuedeDisminuir`: casos l√≠mite (min, habilitado/deshabilitado)
  - [ ] Clase `TestRangos`: validar temp_min=15, temp_max=35, incremento=0.5
  - [ ] Clase `TestSerializacion`: test to_dict()

#### Task 4.2: Tests de la Vista
- **Archivo:** `tests/test_control_temp_vista.py`
- **Estimaci√≥n:** 70 minutos
- **Checklist:**
  - [ ] Clase `TestCreacion`: verificar botones y labels existen
  - [ ] Clase `TestEstilos`: colores SUBIR (rojo), BAJAR (azul)
  - [ ] Clase `TestActualizacion`: test `actualizar_estado()` con diferentes modelos
  - [ ] Clase `TestHabilitacion`: botones enabled/disabled seg√∫n modelo.habilitado
  - [ ] Clase `TestLimitesAlcanzados`: SUBIR disabled en max, BAJAR disabled en min
  - [ ] Clase `TestFeedback`: verificar feedback visual al click
  - [ ] Clase `TestTooltips`: verificar tooltips informativos

#### Task 4.3: Tests del Controlador
- **Archivo:** `tests/test_control_temp_controlador.py`
- **Estimaci√≥n:** 75 minutos
- **Checklist:**
  - [ ] Clase `TestCreacion`: verificar inicializaci√≥n
  - [ ] Clase `TestAumentarTemperatura`: test incremento normal, l√≠mite, deshabilitado
  - [ ] Clase `TestDisminuirTemperatura`: test decremento normal, l√≠mite, deshabilitado
  - [ ] Clase `TestSignals`: verificar emisi√≥n de temperatura_cambiada
  - [ ] Clase `TestComandoJSON`: validar estructura `{"comando": "set_temp_deseada", "valor": X, "timestamp": T}`
  - [ ] Clase `TestSetHabilitado`: test habilitaci√≥n/deshabilitaci√≥n externa
  - [ ] Clase `TestSetTemperatura`: test sincronizaci√≥n con RPi
  - [ ] Clase `TestSecuencias`: test m√∫ltiples incrementos/decrementos

#### Task 4.4: Actualizar conftest.py
- **Archivo:** `tests/conftest.py`
- **Estimaci√≥n:** 20 minutos
- **Checklist:**
  - [ ] Agregar fixture `control_temp_modelo`
  - [ ] Agregar fixture `control_temp_modelo_custom` (factory)
  - [ ] Agregar fixture `control_temp_vista`
  - [ ] Agregar fixture `control_temp_controlador`
  - [ ] Agregar fixture `control_temp_controlador_custom` (factory)

### Fase 5: Tests de Integraci√≥n (estimado: 120 minutos)

#### Task 5.1: Test de Integraci√≥n Completo
- **Archivo:** `tests/test_control_temp_integracion.py`
- **Estimaci√≥n:** 120 minutos
- **Checklist:**
  - [ ] Test flujo completo: modelo ‚Üí controlador ‚Üí vista
  - [ ] Test se√±ales emitidas correctamente
  - [ ] Test comando JSON generado con estructura correcta
  - [ ] Test integraci√≥n con panel Power:
    - Cuando power est√° OFF, botones deshabilitados
    - Cuando power est√° ON, botones habilitados
  - [ ] Test integraci√≥n con Display:
    - Cambios en temp_deseada reflejados en display
  - [ ] Test casos l√≠mite:
    - Intentar superar temp_max (35¬∞C)
    - Intentar bajar de temp_min (15¬∞C)
  - [ ] Test secuencia completa: 22¬∞C ‚Üí 23¬∞C ‚Üí 22.5¬∞C ‚Üí 22¬∞C
  - [ ] Test timestamp en comando JSON es reciente

### Fase 6: Validaci√≥n BDD (OMITIDO por solicitud del usuario)

### Fase 7: Quality Gates (estimado: 60 minutos)

#### Task 7.1: Validar Cobertura
- **Estimaci√≥n:** 20 minutos
- **Checklist:**
  - [ ] Ejecutar: `cd ux_termostato && pytest tests/test_control_temp_*.py --cov=app/presentacion/paneles/control_temp --cov-report=html --cov-report=term`
  - [ ] Verificar coverage ‚â• 95%
  - [ ] Revisar reporte HTML en `htmlcov/`
  - [ ] Identificar l√≠neas sin cobertura y agregar tests si necesario

#### Task 7.2: Validar Pylint
- **Estimaci√≥n:** 20 minutos
- **Checklist:**
  - [ ] Ejecutar: `cd ux_termostato && pylint app/presentacion/paneles/control_temp/`
  - [ ] Verificar score ‚â• 8.0 (objetivo: ‚â• 9.5)
  - [ ] Corregir warnings cr√≠ticos
  - [ ] Documentar disable statements si hay falsos positivos de PyQt6

#### Task 7.3: Validar Complejidad Ciclom√°tica y MI
- **Estimaci√≥n:** 20 minutos
- **Checklist:**
  - [ ] Ejecutar: `cd ux_termostato && python quality/scripts/calculate_metrics.py app/presentacion/paneles/control_temp`
  - [ ] Verificar CC promedio ‚â§ 10 (objetivo: ‚â§ 5)
  - [ ] Verificar MI promedio > 20 (objetivo: > 50)
  - [ ] Generar reporte JSON: `quality/reports/US-004-005-quality.json`

### Fase 8: Actualizaci√≥n de Documentaci√≥n (estimado: 45 minutos)

#### Task 8.1: Actualizar CLAUDE.md
- **Estimaci√≥n:** 15 minutos
- **Checklist:**
  - [ ] Agregar panel `control_temp/` a la lista de paneles implementados
  - [ ] Actualizar "Development Status":
    - Marcar US-004 y US-005 como ‚úÖ
    - Actualizar contadores: Semana 2 - Completado: 6/16 puntos
    - Actualizar "PR√ìXIMO"
  - [ ] Documentar decisi√≥n de implementaci√≥n combinada

#### Task 8.2: Actualizar Comentarios y Docstrings
- **Estimaci√≥n:** 30 minutos
- **Checklist:**
  - [ ] Verificar docstrings en todas las clases (Google style)
  - [ ] Agregar ejemplos de uso en docstrings del controlador
  - [ ] Documentar se√±ales PyQt emitidas con tipos
  - [ ] Documentar rangos v√°lidos de temperatura
  - [ ] Agregar notas sobre integraci√≥n con Power

### Fase 9: Reporte Final y Git (estimado: 60 minutos)

#### Task 9.1: Generar Reporte de Implementaci√≥n
- **Archivo:** `docs/reports/US-004-005-report.md`
- **Estimaci√≥n:** 30 minutos
- **Checklist:**
  - [ ] Resumen de ambas historias implementadas
  - [ ] M√©tricas de calidad (coverage, pylint, CC, MI)
  - [ ] Archivos creados/modificados
  - [ ] Tiempo real vs estimado
  - [ ] Lecciones aprendidas
  - [ ] Decisiones t√©cnicas: por qu√© implementar juntas

#### Task 9.2: Git Workflow
- **Estimaci√≥n:** 30 minutos
- **Checklist:**
  - [ ] Crear rama: `git checkout -b development/simulador-ux-US-004-005`
  - [ ] Commit incremental: modelo
  - [ ] Commit incremental: vista
  - [ ] Commit incremental: controlador
  - [ ] Commit incremental: tests unitarios
  - [ ] Commit incremental: tests integraci√≥n
  - [ ] Commit incremental: quality gates
  - [ ] Commit incremental: documentaci√≥n
  - [ ] Push a remoto
  - [ ] Crear PR hacia `main`

## Estimaci√≥n Total

| Fase | Tareas | Estimaci√≥n |
|------|--------|------------|
| 0. Validaci√≥n | 1 | 5 min |
| 1. BDD | - | OMITIDO |
| 2. Plan | 1 | 25 min |
| 3. Implementaci√≥n MVC | 5 | 150 min |
| 4. Tests Unitarios | 4 | 210 min |
| 5. Tests Integraci√≥n | 1 | 120 min |
| 6. Validaci√≥n BDD | - | OMITIDO |
| 7. Quality Gates | 3 | 60 min |
| 8. Documentaci√≥n | 2 | 45 min |
| 9. Reporte + Git | 2 | 60 min |
| **TOTAL** | **19** | **675 min (~11.25 horas)** |

**Nota:** Estimaci√≥n dentro del rango esperado para 6 puntos (2 historias √ó 4-8 horas cada una)

## Dependencias

### C√≥digo Existente
- `compartido/estilos/ThemeProvider` - Tema oscuro
- `compartido/estilos/ThemeColors` - Constantes de colores
- `app/presentacion/paneles/power/` - Estado de encendido/apagado

### Paneles que dependen de Control Temp
- **Display:** Mostrar√° temperatura deseada cuando modo = "deseada"
- **Climatizador:** Comparar√° temp_actual vs temp_deseada para estado

### Servicios (Futura Implementaci√≥n)
- **ClienteComandos:** Enviar√° comando JSON al RPi v√≠a TCP puerto 14000

## Comunicaci√≥n con Raspberry Pi

### Puerto y Protocolo
- **Puerto:** 14000 (comandos de control)
- **Protocolo:** TCP
- **Formato:** JSON con `\n` al final
- **Patr√≥n:** Fire and forget (no espera respuesta)

### Comando JSON

```json
{
  "comando": "set_temp_deseada",
  "valor": 23.5,
  "timestamp": "2026-01-22T14:30:00.123456"
}
```

**Notas:**
- `valor`: float con un decimal (ej: 22.5, 23.0)
- `timestamp`: ISO 8601 format con microsegundos

## Riesgos y Mitigaciones

| Riesgo | Impacto | Probabilidad | Mitigaci√≥n |
|--------|---------|--------------|------------|
| Iconos de flechas no se muestran | Bajo | Baja | Usar Unicode ‚ñ≤/‚ñº o s√≠mbolos alternativos |
| Validaci√≥n de rangos falla | Alto | Baja | Tests exhaustivos de casos l√≠mite |
| Comandos no llegan al RPi | Medio | Media | Logs detallados, se√±ales de confirmaci√≥n |
| Sincronizaci√≥n con RPi desalineada | Medio | Media | Actualizar temp_deseada desde servidor RPi |
| M√∫ltiples clicks r√°pidos | Medio | Alta | Debounce o validar modelo antes de cada acci√≥n |

## Decisiones T√©cnicas

### 1. Implementaci√≥n Combinada US-004 + US-005
**Decisi√≥n:** Implementar ambas USs en un solo panel MVC
**Raz√≥n:**
- Comparten el mismo panel UI
- Layout requiere que est√©n juntos (especificado en US-005)
- L√≥gica de validaci√≥n es complementaria (mismo rango)
- Reducci√≥n de c√≥digo duplicado
**Beneficio:** Ahorro de ~30% de tiempo de implementaci√≥n

### 2. Modelo con M√©todos de Validaci√≥n
**Decisi√≥n:** Incluir `puede_aumentar()` y `puede_disminuir()` en el modelo
**Raz√≥n:** Encapsular l√≥gica de validaci√≥n cerca de los datos
**Alternativa rechazada:** Validaci√≥n solo en controlador (menos testeable)

### 3. Incremento Constante de 0.5¬∞C
**Decisi√≥n:** Hardcodear `incremento = 0.5` en modelo
**Raz√≥n:** Especificado en criterios de aceptaci√≥n, no hay requisito de configurabilidad
**Futuro:** Si se requiere configurabilidad, mover a ConfigManager

### 4. Temperatura Deseada Inicial: 22¬∞C
**Decisi√≥n:** Valor default de 22¬∞C
**Raz√≥n:** Temperatura ambiente confortable t√≠pica
**Configurable:** S√≠, se puede leer desde RPi al conectar

### 5. Fire and Forget para Comandos
**Decisi√≥n:** No esperar ACK del RPi
**Raz√≥n:** La UI debe ser responsive, el RPi enviar√° estado actualizado v√≠a puerto 14001
**Implicaci√≥n:** Usar "optimistic update" - actualizar UI inmediatamente

### 6. Timestamp en Comando JSON
**Decisi√≥n:** Incluir timestamp ISO 8601 en cada comando
**Raz√≥n:** Permite al RPi detectar comandos duplicados o desfasados
**Formato:** `datetime.now().isoformat()`

## Quality Gates

Criterios obligatorios antes de considerar las USs completadas:

- [ ] **Coverage:** ‚â• 95% en `app/presentacion/paneles/control_temp/`
- [ ] **Pylint:** ‚â• 8.0/10.0 (objetivo: ‚â• 9.5)
- [ ] **CC (Complejidad Ciclom√°tica):** ‚â§ 10 promedio (objetivo: ‚â§ 5)
- [ ] **MI (√çndice de Mantenibilidad):** > 20 (objetivo: > 50)
- [ ] **Tests Unitarios:** 100% pasando
- [ ] **Tests Integraci√≥n:** 100% pasando
- [ ] **No hay c√≥digo duplicado** entre US-004 y US-005

## Progreso de Implementaci√≥n

### ‚úÖ Completado
- [x] Fase 0: Validaci√≥n de contexto (5 min)
- [x] Fase 1: BDD - OMITIDO por solicitud
- [x] Fase 2: Generaci√≥n del plan de implementaci√≥n (25 min)
- [x] Fase 3: Implementaci√≥n MVC (150 min)
- [x] Fase 4: Tests Unitarios (210 min)
- [x] Fase 5: Tests de Integraci√≥n - OMITIDO por solicitud
- [x] Fase 6: BDD - OMITIDO por solicitud
- [x] Fase 7: Quality Gates (60 min)

### üîÑ En Progreso
- [ ] Fase 8: Actualizaci√≥n de Documentaci√≥n

### ‚è≥ Pendiente
- [ ] Fase 9: Reporte Final + Git

## Lecciones Aprendidas

_Este apartado se completar√° al finalizar la implementaci√≥n._

### Lo que funcion√≥ bien
- (Por completar)

### Desaf√≠os encontrados
- (Por completar)

### Mejoras para pr√≥ximas US
- (Por completar)

---

**Versi√≥n:** 1.0
**Fecha de Creaci√≥n:** 2026-01-22
**√öltima Actualizaci√≥n:** 2026-01-22
**Estado:** Fase 2 completada - Listo para implementaci√≥n
